; Top Design: "MultiPA_lib:cell_3:schematic"
; Netlisted using Hierarchy Policy: "Standard"

Options ResourceUsage=yes UseNutmegFormat=no EnableOptim=no TopDesignName="MultiPA_lib:cell_3:schematic" DcopOutputNodeVoltages=yes DcopOutputPinCurrents=yes DcopOutputAllSweepPoints=no DcopOutputDcopType=0
; Library Name: MultiPA_lib
; Cell Name: FirstStageLayout
; View Name: emModel
define FirstStageLayout ( P1  P2  P3  P4  P5  P6  P7  P8  ref=0 ) 
parameters  lin=240 um 
; MomCmpt model has node 0 as implicit reference. Ref node will be ignored and assumed to be grounded!
em_data_name="MultiPA_lib:FirstStageLayout:emModel"
em_data_p0="lin"
em_data_v0=lin
MomCmpt:em_data  P1 P2 P3 P4 P5 P6 P7 P8 \
    name=em_data_name \
    paramFile="" \
    modelFile="E:/Desktop/MultiPA_wrk/MultiPA_lib/%First%Stage%Layout/em%Model/model.ndx" \
    p0="lin" v0=lin v0_Resolution=0.001 um \
    ModelReuse=1 \
    ModelType="MOMMW" \
    ExtrapolationMode="linear" \
    EnforcePassivity=-1
end FirstStageLayout

ErSub=12.9
SubT=75 um
Met2T=2 um
Drt=1 stat{ gauss +/- 3 % }
Drepi=1 stat{ gauss +/- 3 % }
Drepih=1 stat{ gauss +/- 3 % }
Dcmb=1 stat{ gauss +/- 3 % }
Dc12=1 stat{ gauss +/- 3 % }
Dcmb12=1 stat{ gauss +/- 3 % }
DvtoD=0 stat{ gauss +/- 0.1 }
DgmD=1 stat{ gauss +/- 3 % }
DcgsD=1 stat{ gauss +/- 3 % }
DvtoE=0 stat{ gauss +/- 0.1 }
DgmE=1 stat{ gauss +/- 3 % }
DcgsE=1 stat{ gauss +/- 3 % }
#include "C:/Users/admin/ADS/Sanan_P15ED11_v102/circuit/models/_v1.1/curtice/switchvax_v1p0.net"
#include "C:/Users/admin/ADS/Sanan_P15ED11_v102/circuit/models/_v1.1/HEMTtech.net"
#uselib "Mcommon", "common.net_Mcommon"

Options:Options1 Tnom=25 TopologyCheck=yes ForceS_Params=yes GiveAllWarnings=yes MaxWarnings=10  \
ForceM_Params=yes InitialGuessAnnotation=0 TopologyCheckMessages=no doDeltaAC=no ReduceSPortRatio=0.5  \
WarnSOA=yes MaxWarnSOA=5 Census=no MinNodalR=1e-2 Ohm LargeCapThreshold=1e-3 F  \
EnableAssertChecks=no EnableSpareRemoval=no 

S_Param:SP1 CalcS=yes CalcY=no CalcZ=no GroupDelayAperture=1e-4 FreqConversion=no FreqConversionPort=1 StatusLevel=2 CalcNoise=no SortNoise=0 BandwidthForNoise=1.0 Hz DevOpPtLevel=0 \
SweepVar="freq" SweepPlan="SP1_stim" OutputPlan="SP1_Output" 

SweepPlan: SP1_stim Start=25 GHz Stop=35 GHz Step=0.1 GHz 

OutputPlan:SP1_Output \
      Type="Output" \
      UseEquationNestLevel=yes \
      EquationNestLevel=2 \
      UseSavedEquationNestLevel=yes \
      SavedEquationNestLevel=2

#load "python","LinearCollapse"
Component Module="LinearCollapse" Type="ModelExtractor" NetworkRepresentation=2
aele Zin1=zin(S11,PortZ1);

Optim:"Optim1" OptimType="hpVMO" ErrorForm="L2" MaxIters=2000 P=2 DesiredError=0.0 StatusLevel=4 FinalAnalysis="None" NormalizeGoals=yes SetBestValues=yes SaveSolns=yes SaveGoals=yes SaveOptimVars=no UpdateDataset=yes SaveNominal=no SaveAllIterations=no UseAllOptVars=yes UseAllGoals=yes SaveCurrentEF=no InitialTempControlMode=0 SANumTrialsPerIter=10 NumShootsPerIter=20 SATempControlAlpha=0.8 EnableCockpit=yes NormalizeError=yes SaveAllTrials=no UseAdvTermCriteria=no CostRelativeTol=1.0e-8 LimitOfContSmallImprovement=5 

OptimGoal:OptimGoal1 Expr="abs(mag(Zin1)-mag(Zin2))" SimInstanceName="SP1" Weight=1 \
IndepVar[1]="freq" \
SpecLimitLine[1]="OptimGoal1_limit1" 
SpecLimitLine:"OptimGoal1_limit1" Type="LessThan" Max=0.1 Weight=1 \
IndepVar[1]="freq" IndepMin[1]=27 GHz IndepMax[1]=31 GHz 
OptimGoal:OptimGoal2 Expr="abs(phase(Zin1)-phase(Zin2))" SimInstanceName="SP1" Weight=1 \
IndepVar[1]="freq" \
SpecLimitLine[1]="OptimGoal2_limit1" 
SpecLimitLine:"OptimGoal2_limit1" Type="LessThan" Max=0.1 Weight=1 \
IndepVar[1]="freq" IndepMin[1]=27 GHz IndepMax[1]=31 GHz 
V_Source:SRC1  N__4 0 Type="V_DC" Vdc=-0.6 V SaveCurrent=1 
V_Source:SRC2  N__12 0 Type="V_DC" Vdc=5 V SaveCurrent=1 
Port:TermG2  N__2 0 Num=2 Z=50 Ohm Noise=yes 
Port:TermG1  N__0 0 Num=1 Z=50 Ohm Noise=yes 
P15ED_DPA5V_eehemt:pa5v1  N__14 N__5 N__9 lg=0.15 um wg=75 um nf=2 ta=temp 
FirstStageLayout:X1  N__0 N__2 N__4 N__12 N__5 N__14 N__9 N__9 lin=220 um 
